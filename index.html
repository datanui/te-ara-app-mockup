<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Te Ara Téléassistance</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes pulse-ring {
      0% {
        transform: scale(0.8);
        opacity: 1;
      }
      50% {
        transform: scale(1.2);
        opacity: 0.5;
      }
      100% {
        transform: scale(0.8);
        opacity: 1;
      }
    }

    @keyframes dots {
      0%, 20% {
        content: '';
      }
      40% {
        content: '.';
      }
      60% {
        content: '..';
      }
      80%, 100% {
        content: '...';
      }
    }

    .pulse-ring {
      animation: pulse-ring 2s ease-in-out infinite;
    }

    .loading-dots::after {
      content: '';
      animation: dots 1.5s steps(1) infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Création manuelle des icônes Lucide
    const Send = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('line', { x1: "22", y1: "2", x2: "11", y2: "13" }),
      React.createElement('polygon', { points: "22 2 15 22 11 13 2 9 22 2" })
    );
    
    const Star = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: props.className?.includes('fill-') ? "currentColor" : "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('polygon', { points: "12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" })
    );
    
    const Phone = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('path', { d: "M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" })
    );
    
    const Calendar = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('rect', { x: "3", y: "4", width: "18", height: "18", rx: "2", ry: "2" }),
      React.createElement('line', { x1: "16", y1: "2", x2: "16", y2: "6" }),
      React.createElement('line', { x1: "8", y1: "2", x2: "8", y2: "6" }),
      React.createElement('line', { x1: "3", y1: "10", x2: "21", y2: "10" })
    );
    
    const Video = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('path', { d: "m22 8-6 4 6 4V8Z" }),
      React.createElement('rect', { x: "2", y: "6", width: "14", height: "12", rx: "2", ry: "2" })
    );
    
    const PhoneOff = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('path', { d: "M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91" }),
      React.createElement('line', { x1: "23", y1: "1", x2: "1", y2: "23" })
    );
    
    const Mic = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('path', { d: "M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" }),
      React.createElement('path', { d: "M19 10v2a7 7 0 0 1-14 0v-2" }),
      React.createElement('line', { x1: "12", y1: "19", x2: "12", y2: "22" })
    );
    
    const MicOff = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('line', { x1: "2", y1: "2", x2: "22", y2: "22" }),
      React.createElement('path', { d: "M18.89 13.23A7.12 7.12 0 0 0 19 12v-2" }),
      React.createElement('path', { d: "M5 10v2a7 7 0 0 0 12 5" }),
      React.createElement('path', { d: "M15 9.34V5a3 3 0 0 0-5.68-1.33" }),
      React.createElement('path', { d: "M9 9v3a3 3 0 0 0 5.12 2.12" }),
      React.createElement('line', { x1: "12", y1: "19", x2: "12", y2: "22" })
    );
    
    const VideoOff = (props) => React.createElement('svg', { ...props, xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" },
      React.createElement('path', { d: "M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8" }),
      React.createElement('path', { d: "M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z" }),
      React.createElement('line', { x1: "2", y1: "2", x2: "22", y2: "22" })
    );

    // Configuration pour version générale
    const generalConfig = {
      professionals: [
        {
          id: 1,
          name: "Marc Dubois",
          specialty: "Mécanicien automobile",
          location: "Papeete",
          price: 85,
          rating: 4.8,
          reviews: 127,
          available: true,
          nextSlot: null
        },
        {
          id: 2,
          name: "Sophie Martin",
          specialty: "Spécialiste Toyota",
          location: "Rennes",
          price: 95,
          rating: 4.9,
          reviews: 203,
          available: false,
          nextSlot: "18h30"
        },
        {
          id: 3,
          name: "Pierre Leclerc",
          specialty: "Spécialiste Renault",
          location: "Tahiti",
          price: 80,
          rating: 4.7,
          reviews: 89,
          available: true,
          nextSlot: null
        },
        {
          id: 4,
          name: "Jean Rousseau",
          specialty: "Électricien automobile",
          location: "Papeete",
          price: 100,
          rating: 4.9,
          reviews: 156,
          available: false,
          nextSlot: "17h45"
        }
      ],
      brands: [
        "Toyota", "Renault", "Peugeot", "Citroën", "Volkswagen",
        "Mercedes", "BMW", "Audi", "Honda", "Nissan", "Ford", "Autre"
      ],
      placeholder: "Ma voiture ne démarre pas, Mon ordinateur est bloqué...",
      listTitle: "Mécaniciens disponibles",
      aiMessage1: "J'ai sélectionné pour vous une liste de mécaniciens.",
      aiMessage1Link: "liste de mécaniciens",
      aiMessage2: "Pourriez-vous m'indiquer la marque et le modèle de votre véhicule afin que j'affine les résultats ?",
      brandsTitle: "Sélectionnez une marque :",
      showBrands: true,
      showPrice: true
    };

    // Configuration pour version services (professions libérales)
    const servicesConfig = {
      professionals: [
        {
          id: 1,
          name: "Marie Laurent",
          specialty: "Avocate en droit de la famille",
          location: "Papeete",
          price: null,
          rating: 4.9,
          reviews: 156,
          available: true,
          nextSlot: null
        },
        {
          id: 2,
          name: "Pierre Dubois",
          specialty: "Juriste en droit commercial",
          location: "Rennes",
          price: null,
          rating: 4.8,
          reviews: 203,
          available: false,
          nextSlot: "18h30"
        },
        {
          id: 3,
          name: "Sophie Rousseau",
          specialty: "Notaire",
          location: "Tahiti",
          price: null,
          rating: 4.7,
          reviews: 127,
          available: true,
          nextSlot: null
        },
        {
          id: 4,
          name: "Jean Martin",
          specialty: "Avocat en droit pénal",
          location: "Papeete",
          price: null,
          rating: 4.9,
          reviews: 89,
          available: false,
          nextSlot: "17h45"
        }
      ],
      brands: [],
      placeholder: "J'ai un problème de succession, je veux divorcer, j'ai besoin de conseils juridique.",
      listTitle: "Professionnels du droit disponibles",
      aiMessage1: "J'ai sélectionné pour vous une liste de professionnels du droit.",
      aiMessage1Link: "liste de professionnels du droit",
      aiMessage2: "Pouvez-vous préciser votre besoin afin que je vous oriente vers le professionnel le plus adapté ?",
      brandsTitle: "",
      showBrands: false,
      showPrice: false
    };

    // Détection du paramètre URL
    const urlParams = new URLSearchParams(window.location.search);
    const version = urlParams.get('version') || 'general';
    const config = version === 'services' ? servicesConfig : generalConfig;

    function TeleassistancePlatform() {
      const [searchQuery, setSearchQuery] = useState('');
      const [showResults, setShowResults] = useState(false);
      const [inCall, setInCall] = useState(false);
      const [showBooking, setShowBooking] = useState(false);
      const [currentProfessional, setCurrentProfessional] = useState(null);
      const [isMuted, setIsMuted] = useState(false);
      const [isVideoOff, setIsVideoOff] = useState(false);
      const [selectedDate, setSelectedDate] = useState(0);
      const [selectedSlot, setSelectedSlot] = useState(null);
      const [chatHistory, setChatHistory] = useState([]);
      const [callDuration, setCallDuration] = useState(0);

      // Timer for call duration
      useEffect(() => {
        let interval;
        if (inCall) {
          setCallDuration(-300); // Start at -5 minutes (-300 seconds)
          interval = setInterval(() => {
            setCallDuration(prev => prev + 1);
          }, 1000);
        }
        return () => {
          if (interval) clearInterval(interval);
        };
      }, [inCall]);

      const formatCallDuration = (seconds) => {
        const isNegative = seconds < 0;
        const absSeconds = Math.abs(seconds);
        const hrs = Math.floor(absSeconds / 3600);
        const mins = Math.floor((absSeconds % 3600) / 60);
        const secs = absSeconds % 60;
        
        const sign = isNegative ? '-' : '';
        
        if (hrs > 0) {
          return `${sign}${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        return `${sign}${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      };

      const generateDates = () => {
        const dates = [];
        const today = new Date();
        for (let i = 0; i < 5; i++) {
          const date = new Date(today);
          date.setDate(today.getDate() + i);
          dates.push(date);
        }
        return dates;
      };

      const dates = generateDates();

      const generateTimeSlots = () => {
        const slots = [];
        for (let hour = 9; hour < 19; hour++) {
          slots.push(`${hour}h00`);
          if (hour < 18) {
            slots.push(`${hour}h30`);
          }
        }
        return slots;
      };

      const timeSlots = generateTimeSlots();

      const formatDate = (date, format = 'short') => {
        const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];
        const months = ['janvier', 'février', 'mars', 'avril', 'mai', 'juin', 'juillet', 'août', 'septembre', 'octobre', 'novembre', 'décembre'];
        
        if (format === 'short') {
          const today = new Date();
          if (date.toDateString() === today.toDateString()) return 'Aujourd\'hui';
          
          const tomorrow = new Date(today);
          tomorrow.setDate(today.getDate() + 1);
          if (date.toDateString() === tomorrow.toDateString()) return 'Demain';
          
          return `${days[date.getDay()]} ${date.getDate()}`;
        }
        
        return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;
      };

      const handleSearch = () => {
        if (searchQuery.trim()) {
          setChatHistory([
            { type: 'user', text: searchQuery },
            { type: 'ai', text: config.aiMessage1 },
            { type: 'ai', text: config.aiMessage2 }
          ]);
          setShowResults(true);
          setSearchQuery('');
        }
      };

      const handleCall = (professional) => {
        setCurrentProfessional(professional);
        setInCall(true);
        setShowBooking(false);
      };

      const handleBooking = (professional) => {
        setCurrentProfessional(professional);
        setShowBooking(true);
        setInCall(false);
      };

      const handleConfirmBooking = () => {
        alert(`Rendez-vous confirmé avec ${currentProfessional.name}\nLe ${formatDate(dates[selectedDate], 'long')}\nÀ ${selectedSlot}`);
        setShowBooking(false);
        setCurrentProfessional(null);
        setSelectedSlot(null);
        setSelectedDate(0);
      };

      const handleEndCall = () => {
        setInCall(false);
        setCurrentProfessional(null);
        setIsMuted(false);
        setIsVideoOff(false);
        setCallDuration(0);
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          handleSearch();
        }
      };

      if (showBooking && currentProfessional) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50">
            <div className="container mx-auto px-4 py-8 max-w-4xl">
              <div className="mb-6">
                <button
                  onClick={() => {
                    setShowBooking(false);
                    setCurrentProfessional(null);
                    setSelectedSlot(null);
                  }}
                  className="text-blue-600 hover:text-blue-800 font-semibold mb-4 flex items-center gap-2"
                >
                  ← Retour
                </button>
                
                <div className="bg-white rounded-xl shadow-md p-6 mb-6">
                  <div className="flex items-center gap-4">
                    <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                      <span className="text-xl font-bold text-white">
                        {currentProfessional.name.split(' ').map(n => n[0]).join('')}
                      </span>
                    </div>
                    <div>
                      <h2 className="text-2xl font-bold text-gray-800">
                        {currentProfessional.name}
                      </h2>
                      <p className="text-gray-600">{currentProfessional.specialty} ({currentProfessional.location})</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl shadow-lg p-6">
                <h3 className="text-xl font-bold text-gray-800 mb-4">
                  Choisissez un créneau
                </h3>

                <div className="mb-6">
                  <label className="block text-gray-700 font-semibold mb-3">
                    Date
                  </label>
                  <div className="flex gap-2 overflow-x-auto pb-2">
                    {dates.map((date, index) => (
                      <button
                        key={index}
                        onClick={() => setSelectedDate(index)}
                        className={`px-4 py-3 rounded-lg font-semibold whitespace-nowrap transition-colors ${
                          selectedDate === index
                            ? 'bg-blue-600 text-white'
                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                        }`}
                      >
                        {formatDate(date)}
                      </button>
                    ))}
                  </div>
                </div>

                <div className="mb-6">
                  <label className="block text-gray-700 font-semibold mb-3">
                    Heure
                  </label>
                  <div className="grid grid-cols-4 gap-2 max-h-96 overflow-y-auto">
                    {timeSlots.map((slot) => {
                      const isBooked = Math.random() > 0.7;
                      return (
                        <button
                          key={slot}
                          onClick={() => !isBooked && setSelectedSlot(slot)}
                          disabled={isBooked}
                          className={`px-4 py-3 rounded-lg font-semibold transition-colors ${
                            selectedSlot === slot
                              ? 'bg-blue-600 text-white'
                              : isBooked
                              ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                        >
                          {slot}
                        </button>
                      );
                    })}
                  </div>
                </div>

                <button
                  onClick={handleConfirmBooking}
                  disabled={!selectedSlot}
                  className={`w-full py-4 rounded-lg font-semibold text-lg transition-colors ${
                    selectedSlot
                      ? 'bg-green-600 hover:bg-green-700 text-white'
                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                  }`}
                >
                  Confirmer le rendez-vous
                </button>
              </div>
            </div>
          </div>
        );
      }

      if (inCall && currentProfessional) {
        return (
          <div className="min-h-screen bg-gray-900 flex flex-col">
            {/* Timer at the top */}
            <div className="bg-gray-800 py-3 px-4 flex justify-center border-b border-gray-700">
              <div className="flex items-center gap-3 text-white">
                <div className={`w-3 h-3 rounded-full ${callDuration < 0 ? 'bg-orange-500' : 'bg-red-500'} animate-pulse`}></div>
                <span className={`text-lg font-mono font-semibold ${callDuration < 0 ? 'text-orange-400' : 'text-white'}`}>
                  {formatCallDuration(callDuration)}
                </span>
                {config.showPrice && currentProfessional.price && (
                  <span className="text-sm text-gray-300 ml-2">
                    {callDuration < 0
                      ? `5 premières minutes gratuites puis ${currentProfessional.price}€/heure`
                      : `${((currentProfessional.price * callDuration) / 3600).toFixed(2)}€`
                    }
                  </span>
                )}
              </div>
            </div>

            <div className="flex-1 relative">
              <div className="w-full h-full bg-gradient-to-br from-gray-900 via-blue-900 to-gray-900 flex items-center justify-center">
                {/* Animation de connexion */}
                <div className="flex flex-col items-center justify-center gap-8">
                  {/* Cercles animés */}
                  <div className="relative w-48 h-48 flex items-center justify-center">
                    <div className="absolute w-48 h-48 rounded-full bg-blue-500 opacity-20 pulse-ring"></div>
                    <div className="absolute w-32 h-32 rounded-full bg-blue-400 opacity-30 pulse-ring" style={{ animationDelay: '0.3s' }}></div>
                    <div className="absolute w-16 h-16 rounded-full bg-blue-300 opacity-40 pulse-ring" style={{ animationDelay: '0.6s' }}></div>
                    <div className="w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-2xl">
                      <span className="text-3xl font-bold text-white">
                        {currentProfessional.name.split(' ').map(n => n[0]).join('')}
                      </span>
                    </div>
                  </div>

                  {/* Texte de connexion */}
                  <div className="text-center">
                    <h2 className="text-white text-3xl font-semibold mb-2 loading-dots">
                      Tentative de connexion avec {currentProfessional.name}
                    </h2>
                    <p className="text-gray-300 text-lg">{currentProfessional.specialty}</p>
                    <p className="text-gray-400 mt-2">Veuillez patienter</p>
                  </div>
                </div>
              </div>

              <div className="absolute top-4 right-4 w-48 h-36 bg-gray-700 rounded-lg shadow-xl border-2 border-gray-600 overflow-hidden">
                <div className="w-full h-full flex items-center justify-center">
                  {isVideoOff ? (
                    <div className="bg-gray-800 w-full h-full flex items-center justify-center">
                      <VideoOff className="w-8 h-8 text-gray-400" />
                    </div>
                  ) : (
                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 w-full h-full flex items-center justify-center">
                      <span className="text-2xl font-bold text-white">Vous</span>
                    </div>
                  )}
                </div>
              </div>
            </div>

            <div className="bg-gray-800 p-6">
              <div className="max-w-md mx-auto flex justify-center gap-4">
                <button
                  onClick={() => setIsMuted(!isMuted)}
                  className={`p-4 rounded-full transition-colors ${
                    isMuted ? 'bg-red-600 hover:bg-red-700' : 'bg-gray-700 hover:bg-gray-600'
                  }`}
                >
                  {isMuted ? (
                    <MicOff className="w-6 h-6 text-white" />
                  ) : (
                    <Mic className="w-6 h-6 text-white" />
                  )}
                </button>

                <button
                  onClick={() => setIsVideoOff(!isVideoOff)}
                  className={`p-4 rounded-full transition-colors ${
                    isVideoOff ? 'bg-red-600 hover:bg-red-700' : 'bg-gray-700 hover:bg-gray-600'
                  }`}
                >
                  {isVideoOff ? (
                    <VideoOff className="w-6 h-6 text-white" />
                  ) : (
                    <Video className="w-6 h-6 text-white" />
                  )}
                </button>

                <button
                  onClick={handleEndCall}
                  className="p-4 rounded-full bg-red-600 hover:bg-red-700 transition-colors"
                >
                  <PhoneOff className="w-6 h-6 text-white" />
                </button>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50">
          <div className="container mx-auto px-4 py-8 max-w-4xl">
            <div className="text-center mb-12">
              <h1 className="text-4xl font-bold text-gray-800 mb-3">
                Te Ara Téléassistance
              </h1>
              <p className="text-gray-600 text-lg">
                Demandez au spécialiste
              </p>
            </div>

            <div className="bg-white rounded-2xl shadow-lg p-6 mb-8">
              {showResults && chatHistory.length > 0 && (
                <div className="mb-4 space-y-3">
                  {chatHistory.map((msg, index) => (
                    <div key={index}>
                      {msg.type === 'user' ? (
                        <div className="text-gray-800 bg-gray-50 p-3 rounded-lg">
                          {msg.text}
                        </div>
                      ) : (
                        <div className="text-blue-600 font-medium">
                          {msg.text === config.aiMessage1 ? (
                            <>
                              J'ai sélectionné pour vous une{' '}
                              <a
                                href="#professionals-list"
                                className="underline hover:text-blue-800 font-semibold"
                              >
                                {config.aiMessage1Link}
                              </a>
                              .
                            </>
                          ) : (
                            msg.text
                          )}
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              )}

              <div className="relative">
                <textarea
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  onKeyPress={handleKeyPress}
                  placeholder={config.placeholder}
                  className="w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 text-lg resize-none"
                  rows="3"
                />
                <button
                  onClick={handleSearch}
                  className="absolute bottom-3 right-3 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors"
                >
                  <Send className="w-5 h-5" />
                </button>
              </div>
            </div>

            {showResults && (
              <>
                {config.showBrands && (
                  <div className="bg-white rounded-xl shadow-md p-6 mb-8">
                    <h3 className="text-lg font-semibold text-gray-800 mb-4">
                      {config.brandsTitle}
                    </h3>
                    <div className="grid grid-cols-3 md:grid-cols-4 gap-3">
                      {config.brands.map((brand) => (
                        <button
                          key={brand}
                          className="px-4 py-3 bg-gray-100 hover:bg-blue-100 hover:text-blue-700 text-gray-700 rounded-lg font-medium transition-colors"
                        >
                          {brand}
                        </button>
                      ))}
                    </div>
                  </div>
                )}

                <div className="space-y-4" id="professionals-list">
                  <h2 className="text-2xl font-bold text-gray-800 mb-4">
                    {config.listTitle}
                  </h2>

                  {config.professionals.map((pro) => (
                    <div
                      key={pro.id}
                      className="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow"
                    >
                      <div className="flex items-start justify-between">
                        <div className="flex gap-4 flex-1">
                          <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center flex-shrink-0">
                            <span className="text-xl font-bold text-white">
                              {pro.name.split(' ').map(n => n[0]).join('')}
                            </span>
                          </div>

                          <div className="flex-1">
                            <h3 className="text-xl font-bold text-gray-800 mb-1">
                              {pro.name}
                            </h3>
                            <p className="text-gray-600 mb-2">{pro.specialty} ({pro.location})</p>
                            {config.showPrice && pro.price && (
                              <p className="text-blue-600 font-semibold mb-2">{pro.price}€/heure</p>
                            )}
                            
                            <div className="flex items-center gap-2 mb-3">
                              <div className="flex items-center gap-1">
                                <Star className="w-5 h-5 fill-yellow-400 text-yellow-400" />
                                <span className="font-semibold text-gray-800">
                                  {pro.rating}
                                </span>
                              </div>
                              <span className="text-gray-500">
                                ({pro.reviews} avis)
                              </span>
                            </div>

                            {pro.available ? (
                              <div className="inline-flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium">
                                <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                                Disponible maintenant
                              </div>
                            ) : (
                              <div className="text-gray-600 text-sm">
                                Prochaine disponibilité : <span className="font-semibold">{pro.nextSlot}</span>
                              </div>
                            )}
                          </div>
                        </div>

                        <div className="flex flex-col gap-2 ml-4">
                          {pro.available && (
                            <button
                              onClick={() => handleCall(pro)}
                              className="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors whitespace-nowrap"
                            >
                              <Phone className="w-5 h-5" />
                              Appeler
                            </button>
                          )}
                          <button 
                            className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-colors whitespace-nowrap"
                            onClick={() => handleBooking(pro)}
                          >
                            <Calendar className="w-5 h-5" />
                            Rendez-vous
                          </button>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </>
            )}

            {!showResults && (
              <div className="text-center py-12">
                <div className="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                  <Video className="w-12 h-12 text-blue-600" />
                </div>
                <p className="text-gray-500 text-lg">
                  Décrivez votre besoin pour trouver le professionnel adapté
                </p>
              </div>
            )}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TeleassistancePlatform />);
  </script>
</body>
</html>